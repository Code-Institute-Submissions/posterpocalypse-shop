{% extends 'base.html' %}
{% load static %}
{% load bootstrap_tags %}
{% block page_title %}Shopping Cart{% endblock %}
{% block page_heading %}Shopping Cart{% endblock %}
{% block content %}
    <div class="container">
    {% if not cart_items %}
    <div class="row justify-content-center">
        <heading class="col-11 col-md-8 col-lg-6 text-center">
            <h1 class="cart-heading">Your cart is empty!</h1>
            <a href="{% url 'all_products' %}" class="btn btn-success btn-cta my-5">Back to store</a>
        </heading>
    </div>
    {% endif %}
    <form class="cart-form" method="post">
	<table id="cart" class="table table-hover table-condensed">
		<thead>
			<tr>
				<th style="width:50%">Product</th>
				<th style="width:10%">Price</th>
				<th style="width:8%">Quantity</th>
                <th style="width:22%" class="text-center">Subtotal</th>
				<th style="width:10%"></th>
			</tr>
		</thead>
		<tbody>
			<tr>
            {% for item in cart_items %}
				<td data-th="Product">
					<div class="row">
						<div class="col-sm-2 hidden-xs img-responsive" style="background-image: url('{{ MEDIA_URL }}{{ item.product.image }}')"></div>
							<div class="col-sm-10">
								<h4 class="nomargin">{{ item.product.name }}</h4>
								<p class="artist-cart">{{ item.product.artist }}</p>
							</div>
						</div>
				</td>
				<td data-th="Price">£{{ item.product.price }}</td>
                <td data-th="Quantity">
                    {% csrf_token %}
					<input type="number" class="form-control text-center" value="{{ item.quantity }}">
				</td>
                <td data-th="Subtotal" class="text-center">£{{ item.product.price }}</td>
                <td class="actions" data-th="">
					<button class="btn btn-info btn-sm" method="post" action="{% url 'adjust_cart' item.id %}" type="submit"><i class="fa fa-refresh"></i></button>
					<button class="btn btn-danger btn-sm" action="{% url 'cart_item_delete' item.id %}" method="post" type="submit"><i class="fa fa-trash-o"></i></button>
                </td>
			</tr>
            {% endfor %}
		</tbody>
		<tfoot>
            {% if cart_items %}
			<td><a href="{% url 'index' %}" class="btn btn-warning">Continue Shopping</a></td>
			<td colspan="2" class="hidden-xs"></td>
			<td class="hidden-xs text-center"><strong>£{{ total | floatformat:2}}</strong></td>
			<td><a href="/" class="btn btn-success btn-block">Checkout</a></td>
            {% endif %}
		</tfoot>
	</table>
    </form>
</div>
{% endblock %}